<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§»å‹•è¨­å‚™å„ªåŒ–æ¸¬è©¦</title>
    <script src="mobile-optimizer.js"></script>
    <style>
        :root {
            --primary-color: #007bff;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
            font-size: 2.5rem;
        }
        
        .subtitle {
            color: #666;
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 10px;
            background: #f8f9fa;
            border-left: 4px solid var(--primary-color);
        }
        
        .test-section h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .device-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .info-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .info-label {
            font-weight: bold;
            color: #666;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .info-value {
            font-size: 1.2rem;
            color: #333;
        }
        
        .info-value.true {
            color: var(--success-color);
            font-weight: bold;
        }
        
        .info-value.false {
            color: var(--danger-color);
            font-weight: bold;
        }
        
        .game-tests {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .game-test {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            border: 2px solid transparent;
        }
        
        .game-test:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
        }
        
        .game-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .game-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #333;
        }
        
        .game-desc {
            color: #666;
            margin-bottom: 20px;
            font-size: 0.9rem;
        }
        
        .test-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .test-btn:hover {
            background: #0056b3;
            transform: scale(1.05);
        }
        
        .test-btn:active {
            transform: scale(0.95);
        }
        
        .optimization-status {
            margin-top: 30px;
            padding: 20px;
            background: #e8f4fd;
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }
        
        .status-item:last-child {
            border-bottom: none;
        }
        
        .status-label {
            font-weight: bold;
        }
        
        .status-value {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .status-optimized {
            background: var(--success-color);
            color: white;
        }
        
        .status-partial {
            background: var(--warning-color);
            color: #333;
        }
        
        .status-none {
            background: var(--danger-color);
            color: white;
        }
        
        .touch-test {
            margin-top: 30px;
            padding: 20px;
            background: #fff8e1;
            border-radius: 10px;
            text-align: center;
            border: 2px dashed var(--warning-color);
        }
        
        .touch-area {
            width: 200px;
            height: 200px;
            background: var(--primary-color);
            border-radius: 50%;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            user-select: none;
            transition: all 0.2s ease;
        }
        
        .touch-area:active {
            transform: scale(0.9);
            background: #0056b3;
        }
        
        .test-result {
            margin-top: 10px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .device-info {
                grid-template-columns: 1fr;
            }
            
            .game-tests {
                grid-template-columns: 1fr;
            }
            
            .touch-area {
                width: 150px;
                height: 150px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .test-section {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ç§»å‹•è¨­å‚™å„ªåŒ–æ¸¬è©¦</h1>
        <p class="subtitle">æ¸¬è©¦æ‰€æœ‰éŠæˆ²åœ¨ç§»å‹•è¨­å‚™ä¸Šçš„è¡¨ç¾å’Œå„ªåŒ–æ•ˆæœ</p>
        
        <div class="test-section">
            <h2>è¨­å‚™æª¢æ¸¬çµæœ</h2>
            <div class="device-info" id="device-info">
                <!-- è¨­å‚™ä¿¡æ¯å°‡ç”±JavaScriptå¡«å…… -->
            </div>
        </div>
        
        <div class="test-section">
            <h2>éŠæˆ²æ¸¬è©¦</h2>
            <div class="game-tests">
                <div class="game-test">
                    <div class="game-icon">ğŸ§©</div>
                    <div class="game-title">ä¿„ç¾…æ–¯æ–¹å¡Š</div>
                    <div class="game-desc">æ¸¬è©¦è§¸æ‘¸æ§åˆ¶å’Œè™›æ“¬æŒ‰éˆ•</div>
                    <button class="test-btn" onclick="testGame('tetris')">æ¸¬è©¦éŠæˆ²</button>
                </div>
                
                <div class="game-test">
                    <div class="game-icon">ğŸ”¢</div>
                    <div class="game-title">2048éŠæˆ²</div>
                    <div class="game-desc">æ¸¬è©¦æ»‘å‹•æ‰‹å‹¢å’Œè™›æ“¬æ§åˆ¶</div>
                    <button class="test-btn" onclick="testGame('2048')">æ¸¬è©¦éŠæˆ²</button>
                </div>
                
                <div class="game-test">
                    <div class="game-icon">â­</div>
                    <div class="game-title">æ˜Ÿæ˜Ÿé–ƒé¿</div>
                    <div class="game-desc">æ¸¬è©¦è§¸æ‘¸å’Œæ‰‹å‹¢æ§åˆ¶</div>
                    <button class="test-btn" onclick="testGame('handgame')">æ¸¬è©¦éŠæˆ²</button>
                </div>
            </div>
        </div>
        
        <div class="optimization-status">
            <h2>å„ªåŒ–ç‹€æ…‹</h2>
            <div id="optimization-status">
                <!-- å„ªåŒ–ç‹€æ…‹å°‡ç”±JavaScriptå¡«å…… -->
            </div>
        </div>
        
        <div class="touch-test">
            <h2>è§¸æ‘¸éŸ¿æ‡‰æ¸¬è©¦</h2>
            <p>é»æ“Šæˆ–è§¸æ‘¸ä¸‹é¢çš„åœ“åœˆæ¸¬è©¦è§¸æ‘¸éŸ¿æ‡‰</p>
            <div class="touch-area" id="touch-area">
                é»æ“Šæˆ‘
            </div>
            <div class="test-result" id="touch-result">ç­‰å¾…æ¸¬è©¦...</div>
        </div>
    </div>

    <script>
        // é¡¯ç¤ºè¨­å‚™ä¿¡æ¯
        function displayDeviceInfo() {
            const deviceInfo = window.MobileOptimizer.getDeviceInfo();
            const container = document.getElementById('device-info');
            
            const infoItems = [
                { label: 'è¨­å‚™é¡å‹', value: deviceInfo.type },
                { label: 'ç§»å‹•è¨­å‚™', value: deviceInfo.isMobile, isBoolean: true },
                { label: 'å¹³æ¿è¨­å‚™', value: deviceInfo.isTablet, isBoolean: true },
                { label: 'è§¸æ‘¸è¨­å‚™', value: deviceInfo.isTouch, isBoolean: true },
                { label: 'ä½ç«¯è¨­å‚™', value: deviceInfo.isLowEnd, isBoolean: true },
                { label: 'å±å¹•åˆ†è¾¨ç‡', value: `${deviceInfo.screen.width} Ã— ${deviceInfo.screen.height}` },
                { label: 'è¨­å‚™æ–¹å‘', value: deviceInfo.orientation },
                { label: 'ç€è¦½å™¨', value: `${deviceInfo.browser.browser} v${deviceInfo.browser.version}` }
            ];
            
            container.innerHTML = infoItems.map(item => `
                <div class="info-item">
                    <div class="info-label">${item.label}</div>
                    <div class="info-value ${item.isBoolean ? (item.value ? 'true' : 'false') : ''}">
                        ${item.isBoolean ? (item.value ? 'æ˜¯' : 'å¦') : item.value}
                    </div>
                </div>
            `).join('');
        }
        
        // é¡¯ç¤ºå„ªåŒ–ç‹€æ…‹
        function displayOptimizationStatus() {
            const deviceInfo = window.MobileOptimizer.getDeviceInfo();
            const container = document.getElementById('optimization-status');
            
            const optimizations = [
                { 
                    label: 'è§¸æ‘¸å„ªåŒ–', 
                    status: deviceInfo.isTouch ? 'optimized' : 'none',
                    description: deviceInfo.isTouch ? 'å·²å•Ÿç”¨è§¸æ‘¸åé¥‹å’Œç›®æ¨™å¤§å°å„ªåŒ–' : 'éè§¸æ‘¸è¨­å‚™ï¼Œæœªå•Ÿç”¨'
                },
                { 
                    label: 'æ€§èƒ½å„ªåŒ–', 
                    status: deviceInfo.isLowEnd ? 'optimized' : 'partial',
                    description: deviceInfo.isLowEnd ? 'å·²å•Ÿç”¨ä½ç«¯è¨­å‚™å„ªåŒ–' : 'æ¨™æº–æ€§èƒ½è¨­ç½®'
                },
                { 
                    label: 'ç§»å‹•å¸ƒå±€', 
                    status: deviceInfo.isMobile ? 'optimized' : 'none',
                    description: deviceInfo.isMobile ? 'å·²èª¿æ•´å¸ƒå±€é©æ‡‰å°å±å¹•' : 'æ¡Œé¢å¸ƒå±€'
                },
                { 
                    label: 'é˜²æ­¢ç¸®æ”¾', 
                    status: deviceInfo.isTouch ? 'optimized' : 'none',
                    description: deviceInfo.isTouch ? 'å·²é˜²æ­¢é›™æ“Šç¸®æ”¾å’Œæ‰‹å‹¢ç¸®æ”¾' : 'æœªå•Ÿç”¨'
                },
                { 
                    label: 'CSSé¡æ·»åŠ ', 
                    status: (deviceInfo.isMobile || deviceInfo.isTouch) ? 'optimized' : 'partial',
                    description: (deviceInfo.isMobile || deviceInfo.isTouch) ? 'å·²æ·»åŠ ç§»å‹•è¨­å‚™CSSé¡' : 'åƒ…æ·»åŠ åŸºç¤CSSé¡'
                }
            ];
            
            container.innerHTML = optimizations.map(opt => `
                <div class="status-item">
                    <div class="status-label">${opt.label}</div>
                    <div class="status-value status-${opt.status}">
                        ${opt.status === 'optimized' ? 'å·²å„ªåŒ–' : 
                          opt.status === 'partial' ? 'éƒ¨åˆ†å„ªåŒ–' : 'æœªå„ªåŒ–'}
                    </div>
                </div>
                <div style="font-size: 0.9rem; color: #666; margin-bottom: 10px;">${opt.description}</div>
            `).join('');
        }
        
        // æ¸¬è©¦éŠæˆ²
        function testGame(gameType) {
            let gameUrl = '';
            let gameName = '';
            
            switch(gameType) {
                case 'tetris':
                    gameUrl = 'game1.0.html';
                    gameName = 'ä¿„ç¾…æ–¯æ–¹å¡Š';
                    break;
                case '2048':
                    gameUrl = 'game2.0.html';
                    gameName = '2048éŠæˆ²';
                    break;
                case 'handgame':
                    gameUrl = 'game3.0.html';
                    gameName = 'æ˜Ÿæ˜Ÿé–ƒé¿éŠæˆ²';
                    break;
            }
            
            // æ‡‰ç”¨éŠæˆ²ç‰¹å®šå„ªåŒ–
            window.MobileOptimizer.optimizeForGame(gameType);
            
            // é¡¯ç¤ºæ¸¬è©¦æ¶ˆæ¯
            alert(`æ­£åœ¨æ‰“é–‹${gameName}...\nè«‹æ¸¬è©¦ä»¥ä¸‹åŠŸèƒ½ï¼š\n1. è§¸æ‘¸æ§åˆ¶æ˜¯å¦æ­£å¸¸\n2. è™›æ“¬æŒ‰éˆ•æ˜¯å¦é¡¯ç¤º\n3. éŠæˆ²æ˜¯å¦æµæš¢é‹è¡Œ\n4. å¸ƒå±€æ˜¯å¦é©æ‡‰å±å¹•`);
            
            // æ‰“é–‹éŠæˆ²é é¢
            window.open(gameUrl, '_blank');
        }
        
        // è§¸æ‘¸æ¸¬è©¦
        function setupTouchTest() {
            const touchArea = document.getElementById('touch-area');
            const touchResult = document.getElementById('touch-result');
            
            let touchCount = 0;
            let lastTouchTime = 0;
            
            touchArea.addEventListener('click', () => {
                touchCount++;
                const now = Date.now();
                const timeDiff = now - lastTouchTime;
                lastTouchTime = now;
                
                touchResult.textContent = `é»æ“Šæ¬¡æ•¸: ${touchCount} | ä¸Šæ¬¡é»æ“Šé–“éš”: ${timeDiff}ms`;
                touchArea.textContent = `é»æ“Š ${touchCount}`;
                
                // æ·»åŠ è§¸æ‘¸åé¥‹
                touchArea.style.transform = 'scale(0.9)';
                setTimeout(() => {
                    touchArea.style.transform = 'scale(1)';
                }, 100);
            });
            
            // è§¸æ‘¸è¨­å‚™ç‰¹å®šäº‹ä»¶
            touchArea.addEventListener('touchstart', (e) => {
                e.preventDefault();
                touchArea.style.backgroundColor = '#0056b3';
            });
            
            touchArea.addEventListener('touchend', (e) => {
                e.preventDefault();
                touchArea.style.backgroundColor = '';
            });
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // ç­‰å¾…MobileOptimizeråˆå§‹åŒ–
            setTimeout(() => {
                displayDeviceInfo();
                displayOptimizationStatus();
                setupTouchTest();
                
                // æ·»åŠ CSSé¡æ¸¬è©¦
                const htmlClasses = document.documentElement.className;
                console.log('HTMLé¡:', htmlClasses);
                
                // é¡¯ç¤ºç•¶å‰æ‡‰ç”¨çš„CSSé¡
                const classInfo = document.createElement('div');
                classInfo.className = 'test-section';
                classInfo.innerHTML = `
                    <h2>æ‡‰ç”¨çš„CSSé¡</h2>
                    <p>ç•¶å‰HTMLå…ƒç´ æ‡‰ç”¨çš„é¡: <code>${htmlClasses}</code></p>
                    <p>é€™äº›é¡ç”¨æ–¼é‡å°ä¸åŒè¨­å‚™æ‡‰ç”¨ä¸åŒçš„æ¨£å¼</p>
                `;
                document.querySelector('.container').appendChild(classInfo);
                
            }, 500);
        });
        
        // ç›£è½ç§»å‹•å„ªåŒ–å™¨äº‹ä»¶
        document.addEventListener('mobileoptimizer:orientationchange', (e) => {
            console.log('æ–¹å‘è®ŠåŒ–äº‹ä»¶:', e.detail);
            displayDeviceInfo();
        });
        
        document.addEventListener('mobileoptimizer:resize', (e) => {
            console.log('å¤§å°è®ŠåŒ–äº‹ä»¶:', e.detail);
            displayDeviceInfo();
        });
    </script>
</body>
</html>